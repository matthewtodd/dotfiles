autoload -U compinit
compinit -d ${XDG_CACHE_HOME}/zsh/zcompdump

source /usr/local/etc/bash_completion.d/git-prompt.sh
source /usr/local/share/chruby/chruby.sh
source /usr/local/share/chruby/auto.sh

RUBIES+=(/usr/local/Cellar/ruby/*)

export CLICOLOR=yes
export EDITOR=vim
export FZF_DEFAULT_COMMAND='fd --hidden --type f'
export GIT_PS1_SHOWCOLORHINTS=yes
export GIT_PS1_SHOWDIRTYSTATE=yes
export GIT_PS1_SHOWSTASHSTATE=yes
export GIT_PS1_SHOWUNTRACKEDFILES=yes
export GIT_PS1_SHOWUPSTREAM=verbose
export LESSHISTFILE=-
export VIMINIT=":source ${XDG_CONFIG_HOME}/vim/init.vim"

setopt HIST_IGNORE_ALL_DUPS
setopt HIST_IGNORE_SPACE
HISTFILE=${XDG_DATA_HOME}/zsh/history
HISTORY_IGNORE='ls|ls *'

precmd() { __git_ps1 "%~" " " }

# https://stefan.sofa-rockers.org/2018/10/23/macos-dark-mode-terminal-vim/
alias terminal-match-system-dark-mode='osascript <<END
  tell application "System Events"
    if dark mode of appearance preferences then
      set theme to "Solarized Dark"
    else
      set theme to "Solarized Light"
    end if
  end tell

  tell application "Terminal"
    set default settings to settings set theme
    set current settings of tabs of windows to settings set theme
  end tell
END
'

alias tmux='tmux -f ${XDG_CONFIG_HOME/tmux/config'

#!/usr/bin/env ruby

require 'rubygems'
require 'dep_analyzer' # comes from the 'graph' gem

class HomebrewAnalyzer < DepAnalyzer
  def installed
    brew(:list)
  end

  def outdated
    brew(:outdated).map { |line| line.split.first }
  end

  def deps(package)
    brew(:deps, package)
  end

  private

  def brew(*args)
    `brew #{args.join(' ')}`.lines.map { |line| line.strip }
  end
end

if __FILE__ == $0
  HomebrewAnalyzer.new.run
end

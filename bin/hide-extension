#!/usr/bin/env ruby

# This script tells Finder to hide the file extension of every path given on
# the command line.

require 'rubygems'
require 'appscript'
require 'pathname'

finder = Appscript.app('Finder.app')

ARGV.each do |path|
  path = Pathname.new(path).expand_path

  # My applescript-fu is weak. This is the only way I've found so far to get
  # access to a Finder item based on its full path.
  item = finder.startup_disk
  path.each_filename do |component|
    item = item.items[component]
  end

  item.extension_hidden.set(true)
end
